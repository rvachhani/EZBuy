<!Doctype html>
<html>
<head>
</head>
	<style>
		body{
			background: green;
		}
		#wrapper {
			background: red;
			width: 75%;
			margin: 0 auto;
		}
	</style>
<body>
	<div id="wrapper">
		<div class="container">
			<div class="form-group">
                <input type="text" value="" name="search" id="search" class="form-control">
                <input type="submit" onclick="get_results()" name="submit" value="Submit" class="btn btn-primary" />
              <!--   <button type="submit" onclick="get_results()" name="submit" class="btn btn-primary">Search</button> -->
            </div>
			<div id="Results">
				<div class="results">
				</div>
			</div>
		</div>
	</div>
</body>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
	<script>
    // function insert_into_master_arr(master, temp){
    //   master.push(temp);
    // }


    // function jsObj2phpObj(object){
    // 	var json ="{";
    // 	for(property in object){
    // 		var value = object[property];
    // 		if(typeof(value) == "string"){
    // 			json += '"' + property + '":"' + value + '",';
    // 		} else {
    // 			if(!value[0]) {
    // 				json+= '"' + property + '":' + jsObj2phpObj(value) + ',';
    // 			} else {
    // 				json += '"' + property + '":[';
    // 				for(prop in value) json+= '"' + value[prop] + '",';
    // 				json = json.substr(0, json.length-1) + "],";
    // 			}
    // 		}
    // 	}
    // 	return json.substr(0, json.length-1) + "}";
    // }

    function get_results(){
      $(document).ready(function(){
        var keywords = $("input[name='search']").val();
        var arr = keywords.split(" ");
        for(var i=0; i<arr.length; i++){
          alert(arr[i]);
        }

        //Walmart API
        $.ajax({
          type: "GET",
          url: "http://api.walmartlabs.com/v1/search?query=ipod&format=xml&categoryId=3944&apiKey=axf4sj97cjkfvk3hdh9jvvy3",
          dataType: "xml",
          success: function(xml){
              $(xml).find('item').each(function() {
                 var customerReviewAverage = $(this).find('customerRating').text();
                 var regularPrice = $(this).find('msrp').text();
                 var name = $(this).find('name').text();
                 var url = $(this).find('productUrl').text();
                 var thumbnailImage = $(this).find('thumbnailImage').text();
                 // $('<ul></ul>').html("<li>" + name + "</li><li>" + regularPrice + "</li><li><img src='" + thumbnailImage + "' style='height:90px;width:90px' alt='img'></li>").appendTo(".results");
                 // var item_array = [name, regularPrice, customerReviewAverage, url, thumbnailImage];
                 // master_array.push(item_array);

            });
          }
        });
        

        //BestBuy API
        $.ajax({
          type: "GET",
          url: "https://api.bestbuy.com/v1/products((search=MacBook&search=Pro)&(categoryPath.id=abcat0502000))?apiKey=RYHclylDU0CfO272Hgyi4AKY&sort=regularPrice.asc&show=name,thumbnailImage,regularPrice,url,customerReviewAverage&pageSize=15&format=xml",
          dataType: "xml",
          success: function(xml){
            $(xml).find('product').each(function() {
              	 var customerReviewAverage = $(this).find('customerReviewAverage').text();
                 var regularPrice = $(this).find('regularPrice').text();
                 var name = $(this).find('name').text();
                 var url = $(this).find('url').text();
                 var thumbnailImage = $(this).find('thumbnailImage').text();
                 // $('<ul></ul>').html("<li>" + name + "</li><li>" + regularPrice + "</li><li><img src='" + thumbnailImage + "'></li>").appendTo(".results");
                 master_array.push([name, regularPrice, customerReviewAverage, url, thumbnailImage]);
            });
          }
        });
        var master_array = [];


    		// var json = jsObj2phpObj();
    		// $.post("test_search.php", {json:json}, function(data) {
    		// 	console.log(data);
    		// });
      });
    }
    </script>
</html>